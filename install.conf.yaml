- defaults:
    link:
      relink: true
      create: true

- clean: ['~', '~/bin']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  -
    command: ./macos/setup-homebrew.sh
    description: Installing Homebrew and Essential Packages
    stdout: true
  -
    command: |
      # Initialize ASDF for current session
      if [[ -f "/opt/homebrew/opt/asdf/libexec/asdf.sh" ]]; then
        source /opt/homebrew/opt/asdf/libexec/asdf.sh
      elif [[ -f "/usr/local/opt/asdf/libexec/asdf.sh" ]]; then
        source /usr/local/opt/asdf/libexec/asdf.sh
      elif command -v brew >/dev/null 2>&1; then
        ASDF_DIR="$(brew --prefix asdf)/libexec"
        [[ -f "$ASDF_DIR/asdf.sh" ]] && source "$ASDF_DIR/asdf.sh"
      fi
    description: Initialize ASDF for current session

- link:
    ~/.zshrc:
      path: zsh/zshrc.zsh
      force: true
    ~/.oh-my-zsh: zsh/oh-my-zsh
    ~/.zgenom: zsh/zgenom
    ~/.asdfrc: zsh/asdfrc

    ~/bin:
      glob: true
      path: scripts/*
      relink: true

    ~/.config/fastfetch:
      path: fastfetch
      force: true

    ~/.config/direnv:
      path: direnv
      force: true

    # VS Code MacOS
    ~/Library/Application Support/Code/User:
      if: '[ `uname` = Darwin ]'
      glob: true
      path: vscode/macos/*.json
      force: true

    ~/Library/Application Support/Code/User/snippets:
      if: '[ `uname` = Darwin ]'
      path: vscode/snippets
      force: true

- asdf:
  - plugin: nodejs
    url: https://github.com/asdf-vm/asdf-nodejs
    global: lts
    versions:
      - lts
      - latest
  - plugin: pnpm
    url: https://github.com/jonathanmorley/asdf-pnpm
    global: latest
    versions:
      - latest
  # - plugin: yarn
  #   url: https://github.com/twuni/asdf-yarn
  #   global: latest
  #   versions:
  #     - latest

- shell:
  -
    command: ./git/set-gitconfig.sh
    description: Configuring Git
    stdout: true
    quiet: false
  -
    command: |
      echo ""
      echo "ðŸŽ‰ =============================================="
      echo "âœ… Dotfiles installation completed successfully!"
      echo "ðŸŽ‰ =============================================="
      echo ""
      echo "ðŸ“‹ Next steps:"
      echo "   â€¢ Set git email: git config --global user.email 'your-email@example.com'"
      echo "   â€¢ Restart terminal or run: source ~/.zshrc"
      echo "   â€¢ Enjoy your optimized development environment!"
      echo ""
    description: Installation Complete
    stdout: true

